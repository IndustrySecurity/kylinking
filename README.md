# KylinKingäº‘è†œæ™ºèƒ½ç®¡ç†ç³»ç»Ÿ

KylinKingäº‘è†œæ™ºèƒ½ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºSaaSæ¶æ„çš„æ™ºèƒ½è–„è†œåˆ¶é€ ç®¡ç†å¹³å°ï¼Œæ—¨åœ¨ä¸ºè–„è†œåˆ¶é€ ä¼ä¸šæä¾›å…¨é¢çš„ç”Ÿäº§ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼Œæ”¯æŒå¤šç§Ÿæˆ·æ¶æ„ï¼Œæä¾›æ¨¡å—åŒ–çš„ä¸šåŠ¡åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### åç«¯
- Python 3.9+
- Flask 2.0+
- PostgreSQL 13+
- Redis 6+
- SQLAlchemy 2.0+
- Flask-Migrate
- Flask-CORS
- JWTè®¤è¯
- Gunicorn

### å‰ç«¯
- React 18+
- Ant Design 5+
- Vite 4+
- React Router 6+
- Axios
- SCSSæ ·å¼é¢„å¤„ç†å™¨

### éƒ¨ç½²
- Docker & Docker Compose
- Nginx åå‘ä»£ç†
- å¤šç¯å¢ƒéƒ¨ç½²æ”¯æŒ

## æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ¢ å¤šç§Ÿæˆ·æ¶æ„
- **ç§Ÿæˆ·éš”ç¦»**: å®Œå…¨çš„æ•°æ®éš”ç¦»å’Œèµ„æºéš”ç¦»
- **Schemaçº§éš”ç¦»**: æ¯ä¸ªç§Ÿæˆ·æ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®åº“Schema
- **èµ„æºç®¡ç†**: çµæ´»çš„èµ„æºé…ç½®å’Œæƒé™ç®¡ç†

### ğŸ‘¥ ç”¨æˆ·è®¤è¯ä¸æƒé™ç®¡ç†
- JWT Tokenè®¤è¯æœºåˆ¶
- ç»†ç²’åº¦çš„è§’è‰²æƒé™æ§åˆ¶
- ç»„ç»‡æ¶æ„ç®¡ç†ï¼ˆéƒ¨é—¨ã€èŒä½ï¼‰
- ç”¨æˆ·ç®¡ç†å’Œæƒé™åˆ†é…

### ğŸ”§ ç§Ÿæˆ·æ¨¡å—ç®¡ç†ç³»ç»Ÿ
- **æ¨¡å—çº§æ§åˆ¶**: ç§Ÿæˆ·ç®¡ç†å‘˜å¯ä»¥å¯ç”¨/ç¦ç”¨åŠŸèƒ½æ¨¡å—
- **å­—æ®µçº§é…ç½®**: æ”¯æŒè‡ªå®šä¹‰å­—æ®µæ ‡ç­¾ã€éªŒè¯è§„åˆ™ã€æ˜¾ç¤ºæ–¹å¼
- **æ‰©å±•æ€§æ”¯æŒ**: å…è®¸ç§Ÿæˆ·åˆ›å»ºè‡ªå®šä¹‰å­—æ®µå’Œé›†æˆ
- **æƒé™ä¿æŠ¤**: ç³»ç»Ÿå­—æ®µå’Œæ ¸å¿ƒæ¨¡å—å—ä¿æŠ¤
- **é…ç½®å¯¼å‡º**: æ”¯æŒé…ç½®çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½

### ğŸ“Š åŸºç¡€æ¡£æ¡ˆç®¡ç†

#### åŸºç¡€åˆ†ç±»ç®¡ç†
- **å®¢æˆ·åˆ†ç±»ç®¡ç†**: å®¢æˆ·åˆ†ç»„å’Œåˆ†ç±»ä½“ç³»
- **ä¾›åº”å•†åˆ†ç±»ç®¡ç†**: ä¾›åº”å•†åˆ†ç±»å’Œè¯„çº§
- **ææ–™åˆ†ç±»ç®¡ç†**: å¤šçº§ææ–™åˆ†ç±»ä½“ç³»
- **äº§å“åˆ†ç±»ç®¡ç†**: äº§å“åˆ†ç±»å’Œè§„æ ¼ç®¡ç†
- **å·¥è‰ºåˆ†ç±»ç®¡ç†**: ç”Ÿäº§å·¥è‰ºåˆ†ç±»

#### åŸºç¡€æ•°æ®ç®¡ç†
- **å®¢æˆ·ç®¡ç†**: å®¢æˆ·ä¿¡æ¯ã€è”ç³»äººã€åˆåŒç®¡ç†
- **ä¾›åº”å•†ç®¡ç†**: ä¾›åº”å•†æ¡£æ¡ˆã€èµ„è´¨ç®¡ç†
- **ææ–™ç®¡ç†**: ææ–™è§„æ ¼ã€å±æ€§ã€ä»·æ ¼ç®¡ç†
- **äº§å“ç®¡ç†**: äº§å“æ¡£æ¡ˆã€BOMã€å·¥è‰ºè·¯çº¿
- **å‘˜å·¥ç®¡ç†**: å‘˜å·¥æ¡£æ¡ˆã€æŠ€èƒ½ã€ç»©æ•ˆç®¡ç†
- **éƒ¨é—¨ç®¡ç†**: ç»„ç»‡æ¶æ„ã€å²—ä½èŒè´£
- **èŒä½ç®¡ç†**: èŒä½ç­‰çº§ã€è–ªé…¬ä½“ç³»

#### è´¢åŠ¡ç®¡ç†
- **å¸ç§ç®¡ç†**: å¤šå¸ç§æ”¯æŒã€æ±‡ç‡ç®¡ç†
- **ä»˜æ¬¾æ–¹å¼**: ä»˜æ¬¾æ¡ä»¶ã€è´¦æœŸç®¡ç†
- **ç»“ç®—æ–¹å¼**: ç»“ç®—å‘¨æœŸã€å¯¹è´¦è§„åˆ™
- **ç¨ç‡ç®¡ç†**: ç¨ç§é…ç½®ã€ç¨ç‡è®¡ç®—
- **è´¦æˆ·ç®¡ç†**: é“¶è¡Œè´¦æˆ·ã€èµ„é‡‘ç®¡ç†

### ğŸ­ ç”Ÿäº§æ•°æ®ç®¡ç†

#### ç”Ÿäº§æ¡£æ¡ˆ
- **è¢‹å‹ç®¡ç†**: äº§å“è¢‹å‹è§„æ ¼å®šä¹‰
- **è‰²å¡ç®¡ç†**: é¢œè‰²æ ‡å‡†å’Œé…è‰²æ–¹æ¡ˆ
- **è§„æ ¼ç®¡ç†**: äº§å“è§„æ ¼å‚æ•°ç®¡ç†
- **å•ä½ç®¡ç†**: è®¡é‡å•ä½æ ‡å‡†åŒ–
- **åŒ…è£…æ–¹å¼**: åŒ…è£…è§„æ ¼å’Œè¦æ±‚
- **é€è´§æ–¹å¼**: ç‰©æµæ–¹å¼å’Œè¿è´¹æ ‡å‡†
- **æœºå°ç®¡ç†**: è®¾å¤‡æ¡£æ¡ˆã€äº§èƒ½é…ç½®
- **ç­ç»„ç®¡ç†**: ç”Ÿäº§ç­ç»„ã€äººå‘˜é…ç½®
- **ä»“åº“ç®¡ç†**: ä»“åº“å¸ƒå±€ã€åº“ä½ç®¡ç†
- **æŸè€—ç±»å‹**: ç”Ÿäº§æŸè€—åˆ†ç±»ç®¡ç†

#### ç”Ÿäº§é…ç½®
- **è®¡ç®—å‚æ•°**: ç”Ÿäº§è®¡ç®—å…³é”®å‚æ•°
- **è®¡ç®—æ–¹æ¡ˆ**: æˆæœ¬æ ¸ç®—æ–¹æ¡ˆé…ç½®
- **æ²¹å¢¨é€‰é¡¹**: æ²¹å¢¨ç±»å‹å’Œé…æ¯”ç®¡ç†
- **è¢‹ç›¸å…³å…¬å¼**: åˆ¶è¢‹å·¥è‰ºè®¡ç®—å…¬å¼
- **æŠ¥ä»·é…ä»¶**: é…ä»¶ä»·æ ¼å’Œè§„æ ¼
- **æŠ¥ä»·ææ–™**: ææ–™æˆæœ¬è®¡ç®—
- **æŠ¥ä»·æ²¹å¢¨**: æ²¹å¢¨æˆæœ¬æ ¸ç®—
- **æŠ¥ä»·æŸè€—**: æŸè€—ç‡è®¡ç®—æ ‡å‡†
- **æŠ¥ä»·è¿è´¹**: è¿è¾“æˆæœ¬è®¡ç®—

### ğŸ“¦ ä¸šåŠ¡æ“ä½œç®¡ç†

#### ææ–™ä»“åº“ç®¡ç†
- **ææ–™å…¥åº“**: é‡‡è´­å…¥åº“ã€éªŒæ”¶ç®¡ç†
- **ææ–™å‡ºåº“**: ç”Ÿäº§é¢†æ–™ã€å‡ºåº“æ§åˆ¶
- **ææ–™è°ƒæ‹¨**: ä»“åº“é—´è°ƒæ‹¨ã€åº“å­˜å¹³è¡¡
- **ææ–™ç›˜ç‚¹**: å®šæœŸç›˜ç‚¹ã€å·®å¼‚å¤„ç†

#### æˆå“ä»“åº“ç®¡ç†
- **æˆå“å…¥åº“**: ç”Ÿäº§å®Œå·¥å…¥åº“ç®¡ç†
- **æˆå“å‡ºåº“**: é”€å”®å‡ºåº“ã€å‘è´§ç®¡ç†
- **æˆå“è°ƒæ‹¨**: æˆå“åº“å­˜è°ƒé…
- **æˆå“ç›˜ç‚¹**: æˆå“åº“å­˜ç›˜ç‚¹
- **æˆå“åŒ…è£…**: åŒ…è£…ä½œä¸šç®¡ç†
- **æˆå“è¿”å·¥**: è´¨é‡é—®é¢˜è¿”å·¥å¤„ç†
- **è¿‡ç£…ç®¡ç†**: é‡é‡æ£€éªŒå’Œè®°å½•
- **æ‰˜ç›˜ç®¡ç†**: è´§ç‰©è£…æ‰˜å’Œç å›

#### åŠæˆå“ç®¡ç†
- **åŠæˆå“å…¥åº“**: å·¥åºé—´æµè½¬å…¥åº“
- **åŠæˆå“å‡ºåº“**: åå·¥åºé¢†ç”¨
- **åŠæˆå“è¿‡ç£…**: åŠæˆå“é‡é‡ç®¡ç†

#### é”€å”®ç®¡ç†
- **é”€å”®è®¢å•**: è®¢å•å½•å…¥ã€å®¡æ ¸ã€è·Ÿè¸ª
- **å®¢æˆ·åˆåŒ**: åˆåŒç®¡ç†ã€æ¡æ¬¾è·Ÿè¸ª
- **æœˆåº¦è®¡åˆ’**: ç”Ÿäº§é”€å”®è®¡åˆ’åˆ¶å®š
- **é€è´§ç®¡ç†**: é€è´§å•ã€é€è´§é€šçŸ¥
- **é€€è´§ç®¡ç†**: é€€è´§å•ã€é€€è´§å¤„ç†

#### ç”Ÿäº§æŠ¥å‘Š
- **åˆ¶è¢‹æŠ¥å‘Š**: åˆ¶è¢‹å·¥åºäº§å‡ºç»Ÿè®¡
- **å¤å·æŠ¥å‘Š**: å¤å·å·¥åºäº§å‡ºç»Ÿè®¡
- **é¢†æ–™æŠ¥å‘Š**: ææ–™æ¶ˆè€—ç»Ÿè®¡åˆ†æ

### ğŸ“ˆ åº“å­˜ç®¡ç†
- **åº“å­˜æ€»è§ˆ**: å®æ—¶åº“å­˜çŠ¶æ€ç›‘æ§
- **åº“å­˜é¢„è­¦**: åº“å­˜ä¸Šä¸‹é™é¢„è­¦
- **åº“å­˜åˆ†æ**: åº“å­˜å‘¨è½¬ç‡åˆ†æ
- **å‘†æ»ç‰©æ–™**: å‘†æ»åº“å­˜è¯†åˆ«å’Œå¤„ç†

## ç³»ç»Ÿæ¶æ„ç‰¹ç‚¹

### æ¨¡å—åŒ–è®¾è®¡
- åŠŸèƒ½æ¨¡å—å®Œå…¨ç‹¬ç«‹ï¼Œæ”¯æŒæŒ‰éœ€å¯ç”¨
- å¾®æœåŠ¡æ¶æ„æ€æƒ³ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤
- æ’ä»¶åŒ–å¼€å‘ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹é›†æˆ

### æ•°æ®å®‰å…¨
- å¤šå±‚æ¬¡æƒé™æ§åˆ¶
- æ•°æ®åŠ å¯†ä¼ è¾“å’Œå­˜å‚¨
- æ“ä½œå®¡è®¡æ—¥å¿—
- å¤‡ä»½æ¢å¤æœºåˆ¶

### æ€§èƒ½ä¼˜åŒ–
- Redisç¼“å­˜æœºåˆ¶
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- å‰ç«¯æ‡’åŠ è½½å’Œåˆ†é¡µ
- CDNèµ„æºåˆ†å‘

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Docker 20.10+
- Docker Compose 2.0+
- Node.js 16+
- Python 3.9+

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/your-username/kylinking.git
cd kylinking
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
vim backend/.env
```

3. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f docker/docker-compose.dev.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker/docker-compose.dev.yml ps
```

4. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
# è¿›å…¥åç«¯å®¹å™¨
docker exec -it kylinking-backend bash

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
flask db upgrade

# åˆå§‹åŒ–ç³»ç»Ÿæ¨¡å—
python scripts/init_system_modules.py

# åˆ›å»ºæµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰
python create_wanle_test_data.py
```

5. **è®¿é—®åº”ç”¨**
- å‰ç«¯åœ°å€: http://localhost:3000
- åç«¯API: http://localhost:5000/api
- é»˜è®¤ç®¡ç†å‘˜è´¦å·: admin@kylinking.com
- é»˜è®¤å¯†ç : admin123

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡**
```bash
cp backend/.env.example backend/.env.prod
cp frontend/.env.example frontend/.env.prod

# é…ç½®ç”Ÿäº§ç¯å¢ƒå‚æ•°
vim backend/.env.prod
vim frontend/.env.prod
```

2. **æ„å»ºå’Œå¯åŠ¨æœåŠ¡**
```bash
# æ„å»ºé•œåƒ
docker-compose -f docker/docker-compose.prod.yml build

# å¯åŠ¨æœåŠ¡
docker-compose -f docker/docker-compose.prod.yml up -d
```

3. **é…ç½®SSLè¯ä¹¦**
```bash
# ä½¿ç”¨Let's Encryptè·å–SSLè¯ä¹¦
certbot certonly --nginx -d yourdomain.com

# æ›´æ–°Nginxé…ç½®
docker-compose -f docker/docker-compose.prod.yml restart nginx
```

## é¡¹ç›®ç»“æ„

```
kylinking/
â”œâ”€â”€ backend/                 # Flaskåç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ tenant/     # ç§Ÿæˆ·ä¸šåŠ¡API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ business/           # ä¸šåŠ¡æ“ä½œAPI
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inventory/      # åº“å­˜ç®¡ç†API
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ sales/          # é”€å”®ç®¡ç†API
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ base_archive/       # åŸºç¡€æ¡£æ¡ˆAPI
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ base_data/      # åŸºç¡€æ•°æ®API
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ base_category/  # åŸºç¡€åˆ†ç±»API
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ production/     # ç”Ÿäº§æ¡£æ¡ˆAPI
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ financial_management/ # è´¢åŠ¡ç®¡ç†API
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ base_service.py        # åŸºç¡€æœåŠ¡ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ business/              # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inventory/         # åº“å­˜ç®¡ç†æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ sales/             # é”€å”®ç®¡ç†æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ base_archive/          # åŸºç¡€æ¡£æ¡ˆæœåŠ¡
â”‚   â”‚   â”‚       â”œâ”€â”€ base_data/         # åŸºç¡€æ•°æ®æœåŠ¡
â”‚   â”‚   â”‚       â”œâ”€â”€ base_category/     # åŸºç¡€åˆ†ç±»æœåŠ¡
â”‚   â”‚   â”‚       â”œâ”€â”€ production/        # ç”Ÿäº§æ¡£æ¡ˆæœåŠ¡
â”‚   â”‚   â”‚       â””â”€â”€ financial_management/ # è´¢åŠ¡ç®¡ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ schemas/        # æ•°æ®éªŒè¯å±‚
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ migrations/         # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”œâ”€â”€ scripts/            # è„šæœ¬å·¥å…·
â”‚   â””â”€â”€ wsgi.py            # WSGIåº”ç”¨å…¥å£
â”œâ”€â”€ frontend/               # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # APIè°ƒç”¨å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ base-archive/        # åŸºç¡€æ¡£æ¡ˆAPI
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-data/       # åŸºç¡€æ•°æ®API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base-category/   # åŸºç¡€åˆ†ç±»API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ production-archive/ # ç”Ÿäº§æ¡£æ¡ˆAPI
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ production-config/  # ç”Ÿäº§é…ç½®API
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ financial-management/ # è´¢åŠ¡ç®¡ç†API
â”‚   â”‚   â”‚   â””â”€â”€ business/            # ä¸šåŠ¡API
â”‚   â”‚   â”‚       â”œâ”€â”€ inventory/       # åº“å­˜ç®¡ç†API
â”‚   â”‚   â”‚       â””â”€â”€ sales/           # é”€å”®ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ components/    # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ base-archive/        # åŸºç¡€æ¡£æ¡ˆé¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ business/            # ä¸šåŠ¡æ“ä½œé¡µé¢
â”‚   â”‚   â”‚       â”œâ”€â”€ material-warehouse/ # ææ–™ä»“åº“
â”‚   â”‚   â”‚       â”œâ”€â”€ finished-goods/     # æˆå“ç®¡ç†
â”‚   â”‚   â”‚       â””â”€â”€ sales/              # é”€å”®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ hooks/         # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ services/      # å‰ç«¯æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ styles/        # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ public/            # é™æ€èµ„æº
â”œâ”€â”€ docker/                # Dockeré…ç½®
â”‚   â”œâ”€â”€ nginx/             # Nginxé…ç½®
â”‚   â””â”€â”€ postgres/          # PostgreSQLé…ç½®
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ data/                  # æ•°æ®å­˜å‚¨ç›®å½•
```

## å¼€å‘æŒ‡å—

### æœåŠ¡å±‚å¼€å‘è§„èŒƒ
```python
# æ ‡å‡†æ¨¡å¼ - ç»§æ‰¿TenantAwareService
class NewService(TenantAwareService):
    def create_item(self, data, created_by):
        item = self.create_with_tenant(Model, **data)
        self.commit()
        return item.to_dict()
    
    def get_items(self, page=1, per_page=20):
        query = self.session.query(Model)
        # ... ä¸šåŠ¡é€»è¾‘
        return result
```

#### APIå±‚å¼€å‘è§„èŒƒ
```python
# æ ‡å‡†æ¨¡å¼ - ä½¿ç”¨æœåŠ¡å±‚
@bp.route('/items', methods=['GET'])
@jwt_required()
@tenant_required
def get_items():
    service = get_item_service()  # ä½¿ç”¨å·¥å‚å‡½æ•°
    result = service.get_items(page=page)
    return jsonify({'success': True, 'data': result})
```

#### å·¥å‚å‡½æ•°è§„èŒƒ
ä¸ºæ¯ä¸ªæœåŠ¡æ·»åŠ å·¥å‚å‡½æ•°ï¼š
```python
def get_item_service(tenant_id: str = None, schema_name: str = None) -> ItemService:
    """è·å–é¡¹ç›®æœåŠ¡å®ä¾‹"""
    return ItemService(tenant_id=tenant_id, schema_name=schema_name)
```

### çƒ­æ›´æ–°æœºåˆ¶
ç³»ç»Ÿé‡‡ç”¨Dockerå®¹å™¨éƒ¨ç½²ï¼Œæ”¯æŒä»£ç çƒ­æ›´æ–°ï¼Œ**æ— éœ€æ‰‹åŠ¨é‡å¯å®¹å™¨**ï¼š

- **åç«¯çƒ­æ›´æ–°**: Flaskå¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿®æ”¹Pythonä»£ç ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½
- **å‰ç«¯çƒ­æ›´æ–°**: Viteå¼€å‘æœåŠ¡å™¨æ”¯æŒHMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰ï¼Œä¿®æ”¹Reactä»£ç ç«‹å³ç”Ÿæ•ˆ
- **é…ç½®æ›´æ–°**: ä¿®æ”¹ç¯å¢ƒå˜é‡æ–‡ä»¶åï¼Œä½¿ç”¨ `docker-compose restart` é‡å¯å¯¹åº”æœåŠ¡
- **æ•°æ®åº“è¿ç§»**: æ–°å¢è¿ç§»æ–‡ä»¶åï¼Œè¿›å…¥å®¹å™¨æ‰§è¡Œ `flask db upgrade` å³å¯

**æ³¨æ„**: ç”Ÿäº§ç¯å¢ƒä¸‹éœ€è¦æ‰‹åŠ¨é‡å¯æœåŠ¡æ¥åº”ç”¨ä»£ç æ›´æ”¹ã€‚

### åç«¯å¼€å‘

1. **åˆ›å»ºæ–°çš„ä¸šåŠ¡æ¨¡å—**
```python
# 1. æ·»åŠ æ•°æ®æ¨¡å‹ (app/models/business/example.py)
class Example(BaseModel):
    __tablename__ = 'examples'
    name = db.Column(db.String(100), nullable=False)
    description = db.Column(db.Text)

# 2. åˆ›å»ºæœåŠ¡å±‚ (app/services/example_service.py)
class ExampleService(TenantAwareService):  # ç»§æ‰¿TenantAwareService
    def create_example(self, data, created_by):
        example = self.create_with_tenant(Example, **data)
        self.commit()
        return example.to_dict()

# 3. æ·»åŠ å·¥å‚å‡½æ•°
def get_example_service(tenant_id=None, schema_name=None):
    return ExampleService(tenant_id=tenant_id, schema_name=schema_name)

# 4. æ·»åŠ APIè·¯ç”± (app/api/tenant/example.py)
@bp.route('/examples', methods=['POST'])
@jwt_required()
@tenant_required
def create_example():
    service = get_example_service()
    result = service.create_example(data, current_user_id)
    return jsonify({'success': True, 'data': result})
```

2. **æ•°æ®åº“è¿ç§»**
```bash
# ç”Ÿæˆè¿ç§»æ–‡ä»¶
flask db migrate -m "Add example model"

# æ‰§è¡Œè¿ç§»
flask db upgrade
```

### å‰ç«¯å¼€å‘

1. **åˆ›å»ºæ–°çš„é¡µé¢ç»„ä»¶**
```jsx
// src/pages/ExampleManagement.jsx
import React, { useState, useEffect } from 'react';
import { Table, Button, Modal, Form } from 'antd';
import { useApi } from '../hooks/useApi';

const ExampleManagement = () => {
  const [data, setData] = useState([]);
  const { loading, error, request } = useApi();

  const fetchData = async () => {
    const response = await request('/api/examples');
    setData(response.data);
  };

  useEffect(() => {
    fetchData();
  }, []);

  return (
    <div>
      <Table dataSource={data} loading={loading} />
    </div>
  );
};

export default ExampleManagement;
```

2. **æ·»åŠ APIæœåŠ¡**
```javascript
// src/api/exampleApi.js
import { request } from '../utils/request';

export const exampleApi = {
  getList: () => request.get('/api/examples'),
  create: (data) => request.post('/api/examples', data),
  update: (id, data) => request.put(`/api/examples/${id}`, data),
  delete: (id) => request.delete(`/api/examples/${id}`)
};
```

## æµ‹è¯•

### åç«¯æµ‹è¯•
```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install pytest pytest-cov

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest backend/tests/

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
pytest --cov=app backend/tests/
```

### å‰ç«¯æµ‹è¯•
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration
```

## éƒ¨ç½²ç®¡ç†

### å¼€å‘ç¯å¢ƒ
```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
docker-compose -f docker/docker-compose.dev.yml up -d

# é‡æ–°æ„å»ºæœåŠ¡
docker-compose -f docker/docker-compose.dev.yml up --build

# æŸ¥çœ‹æ—¥å¿—
docker logs saas_backend_dev --tail=50

# åœæ­¢æœåŠ¡
docker-compose -f docker/docker-compose.dev.yml down
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker/docker-compose.prod.yml up -d

# æ»šåŠ¨æ›´æ–°
docker-compose -f docker/docker-compose.prod.yml up -d --no-deps backend

# å¤‡ä»½æ•°æ®åº“
docker exec kylinking-postgres pg_dump -U postgres kylinking > backup.sql

# æ¢å¤æ•°æ®åº“
docker exec -i kylinking-postgres psql -U postgres kylinking < backup.sql
```

## ç³»ç»Ÿç›‘æ§

### æ—¥å¿—ç®¡ç†
- åº”ç”¨æ—¥å¿—ï¼š`/var/log/kylinking/`
- Nginxæ—¥å¿—ï¼š`/var/log/nginx/`
- æ•°æ®åº“æ—¥å¿—ï¼šPostgreSQLæ—¥å¿—æ–‡ä»¶

### æ€§èƒ½ç›‘æ§
- æ•°æ®åº“æ€§èƒ½ç›‘æ§
- APIå“åº”æ—¶é—´ç›‘æ§
- å†…å­˜å’ŒCPUä½¿ç”¨ç‡ç›‘æ§

### å¤‡ä»½ç­–ç•¥
- æ•°æ®åº“å®šæ—¶å¤‡ä»½
- åº”ç”¨é…ç½®å¤‡ä»½
- æ–‡ä»¶å­˜å‚¨å¤‡ä»½

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€
docker-compose ps postgres

# æ£€æŸ¥è¿æ¥é…ç½®
cat backend/.env | grep DATABASE_URL
```

2. **å‰ç«¯æ„å»ºå¤±è´¥**
```bash
# æ¸…ç†ç¼“å­˜
rm -rf frontend/node_modules
npm install

# æ£€æŸ¥Nodeç‰ˆæœ¬
node --version
```

3. **æƒé™é—®é¢˜**
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la backend/
chmod -R 755 backend/
```

4. **æ¨¡å—å¯¼å…¥å¤±è´¥**
å¦‚æœé‡åˆ°å‰ç«¯æ¨¡å—å¯¼å…¥é”™è¯¯ï¼ˆå¦‚MIMEç±»å‹é”™è¯¯ï¼‰ï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
- ç¡®ä¿å¯¼å…¥è·¯å¾„ä¸å®é™…æ–‡ä»¶ç»“æ„åŒ¹é…
- åŸºç¡€æ¡£æ¡ˆAPIè·¯å¾„åº”ä½¿ç”¨ `../../../api/base-archive/`
- ä¸šåŠ¡APIè·¯å¾„åº”ä½¿ç”¨ `../../../api/business/`
- æ£€æŸ¥æ–‡ä»¶æ‰©å±•åå’Œè·¯å¾„å¤§å°å†™

## æœ€è¿‘æ›´æ–°

### v1.2.0 (2024å¹´æœ€æ–°ç‰ˆæœ¬)

#### ğŸ”§ APIè·¯å¾„æ ‡å‡†åŒ–
- **å‰ç«¯APIç»“æ„é‡ç»„**: å°†æ‰€æœ‰åŸºç¡€æ¡£æ¡ˆAPIç»Ÿä¸€åˆ° `base-archive/` ç›®å½•ä¸‹
  - åŸºç¡€æ•°æ®: `api/base-archive/base-data/`
  - åŸºç¡€åˆ†ç±»: `api/base-archive/base-category/`
  - ç”Ÿäº§æ¡£æ¡ˆ: `api/base-archive/production-archive/`
  - ç”Ÿäº§é…ç½®: `api/base-archive/production-config/`
  - è´¢åŠ¡ç®¡ç†: `api/base-archive/financial-management/`
- **ä¸šåŠ¡APIé‡ç»„**: ä¸šåŠ¡æ“ä½œAPIç»Ÿä¸€åˆ° `business/` ç›®å½•ä¸‹
  - åº“å­˜ç®¡ç†: `api/business/inventory/`
  - é”€å”®ç®¡ç†: `api/business/sales/`

#### ğŸ› è·¯å¾„å…¼å®¹æ€§ä¿®å¤
- ä¿®å¤äº†å¤§é‡å‰ç«¯æ¨¡å—å¯¼å…¥è·¯å¾„é”™è¯¯
- æ·»åŠ äº†åç«¯APIè·¯å¾„å…¼å®¹æ€§åˆ«åï¼Œç¡®ä¿å‰ç«¯è°ƒç”¨æ­£å¸¸
- è§£å†³äº†é¡µé¢åŠ è½½æ—¶çš„404é”™è¯¯é—®é¢˜

#### ğŸ“± é¡µé¢ç»“æ„ä¼˜åŒ–
- é‡æ–°ç»„ç»‡äº†å‰ç«¯é¡µé¢ç»“æ„ï¼Œä¸APIç»“æ„ä¿æŒä¸€è‡´
- ææ–™ä»“åº“é¡µé¢: `pages/business/material-warehouse/`
- æˆå“ç®¡ç†é¡µé¢: `pages/business/finished-goods/`
- é”€å”®ç®¡ç†é¡µé¢: `pages/business/sales/`

#### âœ… ç³»ç»Ÿç¨³å®šæ€§æå‡
- æ‰€æœ‰APIç«¯ç‚¹ç»è¿‡éªŒè¯ï¼Œç¡®ä¿è·¯å¾„æ­£ç¡®
- å‰ç«¯æ¨¡å—å¯¼å…¥é—®é¢˜å…¨éƒ¨ä¿®å¤
- æå‡äº†ç³»ç»Ÿçš„æ•´ä½“ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒ

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. éµå¾ªå¼€å‘è§„èŒƒ - æ–°ä»£ç å¿…é¡»ä½¿ç”¨TenantAwareServiceæ¨¡å¼
4. æäº¤ä»£ç æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
5. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
6. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- Pythonä»£ç éµå¾ªPEP 8è§„èŒƒ
- JavaScriptä»£ç ä½¿ç”¨ESLintæ£€æŸ¥
- æœåŠ¡å±‚å¿…é¡»ç»§æ‰¿TenantAwareService
- APIå±‚å¿…é¡»ä½¿ç”¨@tenant_requiredè£…é¥°å™¨
- æäº¤ä¿¡æ¯ä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼

### å¼€å‘æµç¨‹
1. åŠŸèƒ½è®¾è®¡å’ŒæŠ€æœ¯æ–¹æ¡ˆè¯„å®¡
2. ç¡®è®¤éµå¾ªæ¶æ„è§„èŒƒå’Œæ¨¡å¼
3. ç¼–ç å®ç°å’Œå•å…ƒæµ‹è¯•
4. ä»£ç å®¡æŸ¥å’Œé›†æˆæµ‹è¯•
5. éƒ¨ç½²éªŒè¯å’Œç”¨æˆ·éªŒæ”¶

## ç‰ˆæœ¬ç®¡ç†

é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (SemVer)ï¼š
- ä¸»ç‰ˆæœ¬å·ï¼šä¸å…¼å®¹çš„APIä¿®æ”¹
- æ¬¡ç‰ˆæœ¬å·ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- ä¿®è®¢å·ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…: KylinKingå¼€å‘å›¢é˜Ÿ
- æŠ€æœ¯æ”¯æŒ: support@kylinking.com
- é¡¹ç›®ä¸»é¡µ: https://www.kylinking.com
- æ–‡æ¡£ä¸­å¿ƒ: https://docs.kylinking.com

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®è´¡çŒ®ä»£ç å’Œå»ºè®®çš„å¼€å‘è€…ï¼Œä»¥åŠæä¾›æŠ€æœ¯æ”¯æŒçš„å¼€æºç¤¾åŒºã€‚ 